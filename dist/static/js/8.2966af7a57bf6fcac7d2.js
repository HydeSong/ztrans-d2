webpackJsonp([8],{LkRG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("QUe6"),i=r("lbHh"),l=r.n(i),c={data:function(){return{customerNumId:l.a.get("__user__customernumid"),currentPage:1,pageSize:20,curPage:1,pgSize:10,routerDetail:[],searchItem:{routerDetailAliaSearchKey:"",carPlateNumberSearchKey:"",driverNameSearchKey:""},searchItemAdd:{carPlateNumberSearchKey:"",driverNameSearchKey:"",driverPhoneSearchKey:"",motorcadeId:"",checkStatus:1},addItemParam:{routerDetailSeries:"",driverSeries:""},tableData:[],searching:!1,addDialog:!1,customerDrivers:[],dialogTableVisible:!1,innerVisible:!1}},computed:{totalPage:function(){return this.tableData.length},addTotalPage:function(){return this.customerDrivers.length},tableInlineData:function(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},tablePopData:function(){return this.customerDrivers.forEach(function(e){e.district=e.prvRealName+"/"+e.cityRealName+"/"+e.cityAreaRealName}),this.customerDrivers.slice((this.curPage-1)*this.pgSize,this.curPage*this.pgSize)}},created:function(){this._getRouterAliaList({customerNumId:this.customerNumId}),this._getAllRouterAndCar({current:this.currentPage,pageSize:1e3,customerNumId:this.customerNumId,driverNameSearchKey:this.searchItem.driverNameSearchKey,carPlateNumberSearchKey:this.searchItem.carPlateNumberSearchKey,routerDetailAliaSearchKey:this.searchItem.routerDetailAliaSearchKey})},methods:{_addRouterToCar:function(e){var t=this;Object(a.a)(e).then(function(e){0===e.code&&t.$message({type:"success",message:"添加成功!"})}).catch(function(e){console.log(e)})},_getAllDriver:function(e){var t=this;Object(a.e)(e).then(function(e){0===e.code&&(t.customerDrivers=e.customerDrivers)}).catch(function(e){console.log(e)})},_deleteRouterAndCar:function(e,t){var r=this;Object(a.c)(e).then(function(e){0===e.code&&(r.$message({type:"success",message:"删除成功!"}),r.tableData.splice(t,1))}).catch(function(e){console.log(e)})},_getAllRouterAndCar:function(e){var t=this;this.searching=!0,Object(a.f)(e).then(function(e){0===e.code&&(t.tableData=e.carRouterModel,t.searching=!1)}).catch(function(e){console.log(e)})},_getRouterAliaList:function(e){var t=this;Object(a.h)(e).then(function(e){0===e.code&&(t.routerDetail=e.routerDetail)}).catch(function(e){console.log(e)})},onSearch:function(){var e={current:this.currentPage,pageSize:this.pageSize,customerNumId:this.customerNumId,driverNameSearchKey:this.searchItem.driverNameSearchKey,carPlateNumberSearchKey:this.searchItem.carPlateNumberSearchKey,routerDetailAliaSearchKey:this.searchItem.routerDetailAliaSearchKey};this._getAllRouterAndCar(e)},onSearchAdd:function(){this._getAllDriver({current:this.curPage,carPlateNumberSearchKey:this.searchItemAdd.carPlateNumberSearchKey,checkStatus:1,customerNumId:this.customerNumId,driverNameSearchKey:this.searchItemAdd.driverNameSearchKey,driverPhoneSearchKey:this.searchItemAdd.driverPhoneSearchKey,motorcadeId:this.searchItemAdd.motorcadeId,pageSize:1e3})},onAdd:function(){this.addDialog=!0},onAddRouterToCar:function(e){console.log(e),this.innerVisible=!0,this.addItemParam.driverSeries=e.driverId},onAddRouterToCarComfirm:function(){this.innerVisible=!1,this._addRouterToCar({customerNumId:this.customerNumId,driverSeries:this.addItemParam.driverSeries,routerDetailSeries:this.addItemParam.routerDetailSeries})},onDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r._deleteRouterAndCar({customerNumId:r.customerNumId,series:t.series},e)}).catch(function(){console.log("取消删除")})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e},handleSzChange:function(e){this.pgSize=e},handleCurChange:function(e){this.curPage=e}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{staticClass:"page",attrs:{type:"full"}},[[r("el-form",{attrs:{inline:!0,model:e.searchItem}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"线路别名"},model:{value:e.searchItem.routerDetailAliaSearchKey,callback:function(t){e.$set(e.searchItem,"routerDetailAliaSearchKey",t)},expression:"searchItem.routerDetailAliaSearchKey"}},e._l(e.routerDetail,function(e,t){return r("el-option",{key:t,attrs:{label:e.routerAlia,value:e.routerAlia}})}))],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"车牌号"},model:{value:e.searchItem.carPlateNumberSearchKey,callback:function(t){e.$set(e.searchItem,"carPlateNumberSearchKey",t)},expression:"searchItem.carPlateNumberSearchKey"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"司机姓名"},model:{value:e.searchItem.driverNameSearchKey,callback:function(t){e.$set(e.searchItem,"driverNameSearchKey",t)},expression:"searchItem.driverNameSearchKey"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.searching},on:{click:e.onSearch}},[e._v("查询")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.onAdd}},[e._v("新增")])],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInlineData,"highlight-current-row":"",stripe:""}},[r("el-table-column",{attrs:{fixed:"",type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"routerAlia",label:"线路别名"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"driverName",label:"司机姓名"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"carPlateNumber",label:"车牌号"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"driverPhone",label:"手机号"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.onDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"新增车辆",visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t}}},[r("el-form",{attrs:{inline:!0,model:e.searchItemAdd}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"车牌号"},model:{value:e.searchItemAdd.carPlateNumberSearchKey,callback:function(t){e.$set(e.searchItemAdd,"carPlateNumberSearchKey",t)},expression:"searchItemAdd.carPlateNumberSearchKey"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"司机姓名"},model:{value:e.searchItemAdd.driverNameSearchKey,callback:function(t){e.$set(e.searchItemAdd,"driverNameSearchKey",t)},expression:"searchItemAdd.driverNameSearchKey"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"手机号"},model:{value:e.searchItemAdd.driverPhoneSearchKey,callback:function(t){e.$set(e.searchItemAdd,"driverPhoneSearchKey",t)},expression:"searchItemAdd.driverPhoneSearchKey"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.searching},on:{click:e.onSearchAdd}},[e._v("查询")])],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tablePopData,"highlight-current-row":"",height:"400"}},[r("el-table-column",{attrs:{fixed:"",type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"carPlateNumber",label:"车牌号",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"driverName",label:"司机姓名",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"driverIdentityId",label:"身份证",width:"160"}}),e._v(" "),r("el-table-column",{attrs:{prop:"workSpace",label:"接单区域起始地",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"district",label:"省/市/区"}}),e._v(" "),r("el-table-column",{attrs:{prop:"carTypeRealName",label:"车型"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.onAddRouterToCar(t.row)}}},[e._v("添加")])]}}])})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.curPage,"page-sizes":[10,20,50,100],"page-size":e.pgSize,layout:"total, sizes, prev, pager, next, jumper",total:e.addTotalPage},on:{"size-change":e.handleSzChange,"current-change":e.handleCurChange}})],1),e._v(" "),r("el-dialog",{attrs:{width:"18%",title:"线路别名",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[r("el-form",{attrs:{inline:!0,model:e.searchItem}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"线路别名"},model:{value:e.addItemParam.routerDetailSeries,callback:function(t){e.$set(e.addItemParam,"routerDetailSeries",t)},expression:"addItemParam.routerDetailSeries"}},e._l(e.routerDetail,function(e,t){return r("el-option",{key:t,attrs:{label:e.routerAlia,value:e.series}})}))],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onAddRouterToCarComfirm}},[e._v("确定")])],1)],1)],1)]],2)},staticRenderFns:[]};var n=r("VU/8")(c,o,!1,function(e){r("T7va")},"data-v-43f7eca4",null);t.default=n.exports},T7va:function(e,t){}});
//# sourceMappingURL=8.2966af7a57bf6fcac7d2.js.map